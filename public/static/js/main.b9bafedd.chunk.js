(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{125:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),o=a.n(r),i=(a(95),a(50)),s=a(15),l=a(12),d=a(48),u=a(77),j=a(24),b=a.n(j),h=a(4);function x(e){console.log("AuthRoute re-render: ",e);var t=e.children,a=e.tokenValid,n=void 0!==a&&a,r=e.setTokenValid,o=void 0===r?function(){}:r,i=Object(u.a)(e,["children","tokenValid","setTokenValid"]);return c.a.useEffect((function(){b.a.get("/decodeToken").then((function(e){e.data&&o(!0)})).catch((function(e){console.log(e),o(!1)}))}),[]),Object(h.jsx)(l.b,Object(d.a)(Object(d.a)({},i),{},{render:function(e){var a=e.location;return n?t:Object(h.jsx)(l.a,{to:{pathname:"/pages/login",state:{from:a}}})}}))}var p=c.a.memo(x);function m(e){return console.log("Home re-render: ",e),Object(h.jsx)("div",{children:"Home Page"})}var O=c.a.memo(m),f=a(184),g=a(175),v=a(170),y=a(177),k=a(173),w=a(180),S=a(168),T=a(176),C=a(178),I=a(76),A=a.n(I),V=a(79),D=a(165),F=a(169),N=a(182),E=Object(D.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function P(e){var t=E(),a=e.open,n=e.setOpen,c=e.message;return Object(h.jsx)(N.a,{className:t.backdrop,open:a,onClick:function(){n(!1)},children:Object(h.jsx)(C.a,{children:c})})}function z(){return Object(h.jsxs)(V.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(h.jsx)(S.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var W=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function M(e){var t=e.setTokenValid,a=e.showAlert,n=Object(l.g)(),r=W(),o=c.a.useState(""),i=Object(s.a)(o,2),d=i[0],u=i[1],j=c.a.useState(""),x=Object(s.a)(j,2),p=x[0],m=x[1],O=c.a.useState(10),I=Object(s.a)(O,2),D=I[0],N=I[1],E=c.a.useState(!1),M=Object(s.a)(E,2),H=M[0],q=M[1],B=function(e){console.log("submit:",d,p),q(!0),setTimeout((function(){b.a.post("/login",{username:d,password:p,exp:D}).then((function(e){console.log(e.data);var c=e.data,r=c.authenticated,o=(c.redirect,c.errMsg);if(!0===r)return t(!0),n.push("/pages/protected"),q(!1),void a({severity:"success",message:"login success!"});q(!1),a({severity:"error",message:o})})).catch((function(e){console.error(e),q(!1)}))}),1e3)};return Object(h.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(h.jsx)(v.a,{}),H&&Object(h.jsx)(P,{open:H,message:"Check Authenticated.."}),Object(h.jsxs)("div",{className:r.paper,children:[Object(h.jsx)(f.a,{className:r.avatar,children:Object(h.jsx)(A.a,{})}),Object(h.jsx)(V.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(h.jsxs)("div",{className:r.div,noValidate:!0,children:[Object(h.jsx)(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:d,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:p,onChange:function(e){return m(e.target.value)},onKeyDown:function(e){13===e.keyCode&&B()}}),Object(h.jsx)(k.a,{control:Object(h.jsx)(w.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(h.jsxs)(C.a,{display:"flex",alignItems:"center",width:"100%",children:[Object(h.jsx)(C.a,{width:"100%",children:"Token Expires in(sec)"}),Object(h.jsx)(C.a,{width:"100%",children:Object(h.jsx)(y.a,{variant:"outlined",size:"small",margin:"dense",value:D,onChange:function(e){console.log(e.target.value),""!==e.target.value?NaN!==parseInt(e.target.value)&&N(parseInt(e.target.value)):N(0)}})})]}),Object(h.jsx)(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,onClick:B,children:"Sign In"}),Object(h.jsxs)(T.a,{container:!0,children:[Object(h.jsx)(T.a,{item:!0,xs:!0,children:Object(h.jsx)(S.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(h.jsx)(T.a,{item:!0,children:Object(h.jsx)(S.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(h.jsx)(C.a,{mt:8,children:Object(h.jsx)(z,{})})]})}var H=c.a.memo(M);function q(e){console.log("Protected re-render: ",e);e.history;var t=c.a.useState(!0),a=Object(s.a)(t,2),n=a[0],r=a[1],o=c.a.useState({}),i=Object(s.a)(o,2),l=i[0],d=i[1],u=c.a.useState("calculating..."),j=Object(s.a)(u,2),x=j[0],p=j[1];return c.a.useEffect((function(){var e;return b.a.get("/protected").then((function(t){console.log(t.data);var a=t.data,n=a.exp;a.iat;d(a),r(!1),e=setInterval((function(){var e=parseInt((1e3*n-Date.now())/1e3).toFixed(0);p(e<=0?"expired":e)}),1e3)})).catch((function(e){r(!1),console.log(e)})),function(){clearInterval(e)}}),[]),Object(h.jsx)(C.a,{display:"flex",flexDirection:"column",m:"auto",mt:"80px",width:"30%",children:!1===n&&Object(h.jsxs)(c.a.Fragment,{children:[Object.entries(l).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(h.jsxs)(C.a,{display:"flex",children:[Object(h.jsxs)(C.a,{children:[a," :"]}),Object(h.jsx)(C.a,{children:n})]})})),Object(h.jsx)(C.a,{fontSize:"20px",children:"expired"===x?"Token expired!!":"Token expires in [".concat(x,"] secs.")})]})})}var B=c.a.memo(q);function J(e){console.log("Protected re-render: ",e);e.history;var t=c.a.useState({}),a=Object(s.a)(t,2),n=a[0],r=a[1],o=c.a.useState("calculating..."),i=Object(s.a)(o,2),l=i[0],d=i[1];return c.a.useEffect((function(){var e;return b.a.get("/protected").then((function(t){console.log(t.data);var a=t.data,n=a.exp;a.iat;r(a),e=setInterval((function(){var e=parseInt((1e3*n-Date.now())/1e3).toFixed(0);d(e<0?"expired":e)}),1e3)})).catch((function(e){console.log(e)})),function(){clearInterval(e)}}),[]),Object(h.jsxs)(C.a,{display:"flex",flexDirection:"column",m:"auto",mt:"80px",width:"30%",children:[Object.entries(n).map((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(h.jsxs)(C.a,{display:"flex",children:[Object(h.jsxs)(C.a,{children:[a," :"]}),Object(h.jsx)(C.a,{children:n})]})})),Object(h.jsx)(C.a,{fontSize:"20px",children:"expired"===l?"Token expired!!":"Token expires in [".concat(l,"] secs.")})]})}var L=c.a.memo(J),R=a(181),Y=a(179);function K(e){return Object(h.jsx)(Y.a,Object(d.a)({elevation:6,variant:"filled"},e))}var U=Object(D.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function G(e){var t=U(),a=e.openAlert,n=e.setOpenAlert,c=e.severity,r=void 0===c?"info":c,o=e.alertMessage,i=void 0===o?"":o,s=function(e,t){"clickaway"!==t&&n(!1)};return Object(h.jsx)("div",{className:t.root,children:Object(h.jsx)(R.a,{open:a,autoHideDuration:6e3,onClose:s,children:Object(h.jsx)(K,{severity:r,onClose:s,children:i})})})}function Q(e){console.log("App re-render:",e);var t=c.a.useState(!0),a=Object(s.a)(t,2),n=a[0],r=a[1],o=c.a.useState(!1),i=Object(s.a)(o,2),d=i[0],u=i[1],j=c.a.useState(!1),x=Object(s.a)(j,2),m=x[0],f=x[1],g=c.a.useState(""),v=Object(s.a)(g,2),y=v[0],k=v[1],w=c.a.useState("info"),S=Object(s.a)(w,2),T=S[0],C=S[1];c.a.useEffect((function(){b.a.get("/decodeToken").then((function(e){e.data&&setTimeout((function(){u(!0),r(!1)}),1e3)})).catch((function(e){setTimeout((function(){I({severity:"error",message:e.message}),u(!1),r(!1)}),1e3)}))}),[]);var I=function(e){var t=e.message,a=e.severity;k(t),C(a),f(!0)};return Object(h.jsxs)("div",{children:[n?Object(h.jsx)(P,{open:n,message:"Check Authenticated.."}):Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{exact:!0,path:"/pages/login",children:Object(h.jsx)(H,{showAlert:I,setTokenValid:u})}),Object(h.jsx)(p,{tokenValid:d,setTokenValid:u,showAlert:I,exact:!0,path:"/pages/protected",children:Object(h.jsx)(B,{})}),Object(h.jsx)(p,{tokenValid:d,setTokenValid:u,showAlert:I,exact:!0,path:"/pages/userInfo",children:Object(h.jsx)(L,{})}),Object(h.jsx)(l.b,{exact:!0,path:"/",component:O})]}),Object(h.jsx)(G,{openAlert:m,setOpenAlert:f,alertMessage:y,severity:T})]})}function X(){return Object(h.jsx)(i.a,{children:Object(h.jsx)(Q,{})})}var Z=c.a.memo(X),$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,185)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(Z,{})}),document.getElementById("root")),$()},95:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.b9bafedd.chunk.js.map