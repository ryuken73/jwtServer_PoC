{"version":3,"sources":["AuthRoute.js","pages/Home.js","Loading.js","pages/Login.js","pages/Protected.js","pages/UserInfo.js","Alert.js","App.js","Root.js","reportWebVitals.js","index.js"],"names":["AuthRoute","props","console","log","children","tokenValid","setTokenValid","rest","React","useEffect","axios","get","then","res","data","catch","err","render","location","to","pathname","state","from","memo","Home","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","SimpleBackdrop","classes","open","setOpen","message","Backdrop","className","onClick","Box","Copyright","Typography","variant","align","Link","href","Date","getFullYear","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Login","showAlert","history","useHistory","useState","userId","setUserId","password","setPassword","jwtExpire","setJwtExpire","isFetching","setIsFetching","onSubmit","event","setTimeout","post","username","exp","authenticated","errMsg","redirect","push","severity","error","Container","component","maxWidth","CssBaseline","Avatar","div","noValidate","TextField","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","type","onKeyDown","keyCode","FormControlLabel","control","Checkbox","size","NaN","parseInt","Button","Grid","container","item","xs","mt","Protected","tokenDecoded","setTokenDecoded","remainSeconds","setRemainSeconds","expTimer","iat","setInterval","remainSec","now","toFixed","clearInterval","m","Fragment","Object","entries","map","key","fontSize","Alert","elevation","root","CustomizedSnackbars","openAlert","setOpenAlert","alertMessage","handleClose","reason","Snackbar","autoHideDuration","onClose","App","setAlertMessage","alertSeverity","setAlertSevirity","options","exact","path","UserInfo","Root","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b9bafedd.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Route, Redirect} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction AuthRoute(props) {\r\n    console.log('AuthRoute re-render: ', props);\r\n    const {\r\n        children,\r\n        tokenValid=false,\r\n        setTokenValid=()=>{},\r\n        ...rest\r\n    } = props;\r\n    React.useEffect(() => {\r\n        axios.get('/decodeToken')\r\n        .then(res => {\r\n            const authenticated = res.data;\r\n            if(authenticated){\r\n                setTokenValid(true)\r\n            }\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n            setTokenValid(false)\r\n        })\r\n    },[])\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({location}) => \r\n                tokenValid ? (children) :\r\n                (<Redirect\r\n                    to={{\r\n                        pathname: '/pages/login',\r\n                        state: {from: location}\r\n                    }}\r\n                ></Redirect>)\r\n            }\r\n        >            \r\n        </Route>\r\n    )\r\n}\r\n\r\nexport default React.memo(AuthRoute)","import React from 'react'\r\n\r\nfunction Home(props) {\r\n    console.log('Home re-render: ', props);\r\n\r\n    return (\r\n        <div>\r\n            Home Page\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Home)","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nexport default function SimpleBackdrop(props) {\r\n  const classes = useStyles();\r\n//   const [open, setOpen] = React.useState(false);\r\n  const {open, setOpen, message} = props;\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\r\n        {/* <CircularProgress color=\"inherit\" /> */}\r\n        <Box>{message}</Box>\r\n    </Backdrop>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\nimport Loading from '../Loading';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nfunction Login(props) {\r\n  const {\r\n    setTokenValid,\r\n    showAlert\r\n  } = props;\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [userId, setUserId] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [jwtExpire, setJwtExpire] = React.useState(10);\r\n  const [isFetching, setIsFetching] = React.useState(false);\r\n\r\n  const onChangeId = event => setUserId(event.target.value);\r\n  const onChangePassword = event => setPassword(event.target.value);\r\n\r\n  const onKeyUp = event => {\r\n    if(event.keyCode === 13){\r\n      onSubmit();\r\n    }\r\n  }\r\n\r\n  const onChangeExp = event => {\r\n    console.log(event.target.value);\r\n    if(event.target.value === ''){\r\n      setJwtExpire(0);\r\n      return\r\n    }\r\n    if(parseInt(event.target.value) !== NaN){\r\n      setJwtExpire(parseInt(event.target.value));\r\n    }\r\n  }\r\n\r\n  const onSubmit = event => {\r\n    console.log('submit:', userId, password);\r\n    setIsFetching(true);\r\n    setTimeout(() => {\r\n      axios.post('/login', {\r\n          username:userId,\r\n          password:password,\r\n          exp: jwtExpire\r\n      }).\r\n      then(res => {\r\n          console.log(res.data)\r\n          const {authenticated, redirect, errMsg} = res.data;\r\n          if(authenticated === true){\r\n            setTokenValid(true)\r\n            history.push('/pages/protected');\r\n            setIsFetching(false)\r\n            showAlert({severity:'success', message: 'login success!'})\r\n            return;\r\n          }\r\n          setIsFetching(false)\r\n          showAlert({severity:'error', message: errMsg})\r\n      })\r\n      .catch(err => {\r\n          console.error(err)\r\n          setIsFetching(false)\r\n      })\r\n    }, 1000)\r\n\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      {isFetching && <Loading open={isFetching} message={\"Check Authenticated..\"}></Loading> }\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <div className={classes.div} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n            value={userId}\r\n            onChange={onChangeId}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onChange={onChangePassword}\r\n            onKeyDown={onKeyUp}\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Box width=\"100%\">Token Expires in(sec)</Box>\r\n            <Box width=\"100%\">\r\n              <TextField variant=\"outlined\" size=\"small\" margin=\"dense\" value={jwtExpire} onChange={onChangeExp}></TextField>\r\n            </Box>\r\n          </Box>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={onSubmit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default React.memo(Login)","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport axios from 'axios';\r\n\r\nfunction Protected(props) {\r\n    console.log('Protected re-render: ', props);\r\n    const {\r\n        history\r\n    } = props;\r\n    const [isFetching, setIsFetching] = React.useState(true);\r\n    const [tokenDecoded, setTokenDecoded] = React.useState({});\r\n    const [remainSeconds, setRemainSeconds] = React.useState('calculating...');\r\n    React.useEffect(() => {\r\n        let expTimer;\r\n        axios.get('/protected')\r\n        .then(res => {\r\n            console.log(res.data);\r\n            const tokenDecoded = res.data;\r\n            const {exp, iat} = tokenDecoded;\r\n            setTokenDecoded(tokenDecoded);\r\n            setIsFetching(false);\r\n            expTimer = setInterval(() => {\r\n                const remainSec = parseInt((exp*1000 - Date.now())/1000).toFixed(0);\r\n                if(remainSec <= 0) {\r\n                    setRemainSeconds('expired');\r\n                    return\r\n                }\r\n                setRemainSeconds(remainSec);\r\n            },1000)\r\n        })\r\n        .catch(err => {\r\n            setIsFetching(false);\r\n            console.log(err)\r\n        })\r\n        return () => {\r\n            clearInterval(expTimer);\r\n        }\r\n    },[])\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"auto\" mt=\"80px\" width=\"30%\">\r\n            {isFetching === false &&      \r\n            <React.Fragment>\r\n                {Object.entries(tokenDecoded).map(([key, value]) => {\r\n                    return (\r\n                        <Box display=\"flex\">\r\n                            <Box>{key} :</Box>\r\n                            <Box>{value}</Box>\r\n                        </Box>\r\n                    )\r\n                })}\r\n                <Box fontSize=\"20px\">\r\n                    {remainSeconds === 'expired' ?\r\n                        'Token expired!!':\r\n                        `Token expires in [${remainSeconds}] secs.`\r\n                    }\r\n                </Box>\r\n            </React.Fragment>\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Protected)","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport axios from 'axios';\r\n\r\nfunction Protected(props) {\r\n    console.log('Protected re-render: ', props);\r\n    const {\r\n        history\r\n    } = props;\r\n    const [tokenDecoded, setTokenDecoded] = React.useState({});\r\n    const [remainSeconds, setRemainSeconds] = React.useState('calculating...');\r\n    React.useEffect(() => {\r\n        let expTimer;\r\n        axios.get('/protected')\r\n        .then(res => {\r\n            console.log(res.data);\r\n            const tokenDecoded = res.data;\r\n            const {exp, iat} = tokenDecoded;\r\n            setTokenDecoded(tokenDecoded);\r\n            expTimer = setInterval(() => {\r\n                const remainSec = parseInt((exp*1000 - Date.now())/1000).toFixed(0);\r\n                if(remainSec < 0) {\r\n                    setRemainSeconds('expired');\r\n                    return\r\n                }\r\n                setRemainSeconds(remainSec);\r\n            },1000)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n        return () => {\r\n            clearInterval(expTimer);\r\n        }\r\n    },[])\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"auto\" mt=\"80px\" width=\"30%\">\r\n            {Object.entries(tokenDecoded).map(([key, value]) => {\r\n                return (\r\n                    <Box display=\"flex\">\r\n                        <Box>{key} :</Box>\r\n                        <Box>{value}</Box>\r\n                    </Box>\r\n                )\r\n            })}\r\n            <Box fontSize=\"20px\">\r\n                {remainSeconds === 'expired' ?\r\n                    'Token expired!!':\r\n                    `Token expires in [${remainSeconds}] secs.`\r\n                }\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Protected)","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    '& > * + *': {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function CustomizedSnackbars(props) {\r\n  const classes = useStyles();\r\n  const {openAlert, setOpenAlert, severity='info', alertMessage=''} = props;\r\n\r\n  const handleClick = () => {\r\n    setOpenAlert(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenAlert(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Snackbar open={openAlert} autoHideDuration={6000} onClose={handleClose}>\r\n        <Alert severity={severity} onClose={handleClose}>{alertMessage}</Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport Box from '@material-ui/core/Box'\r\nimport AuthRoute from './AuthRoute';\r\nimport {Login, Protected, UserInfo, Home} from './pages';\r\nimport Loading from './Loading';\r\nimport Alert from './Alert';\r\nimport axios from 'axios';\r\n\r\nexport default function App(props) {\r\n  console.log('App re-render:', props);\r\n  const [isFetching, setIsFetching] = React.useState(true);\r\n  const [tokenValid, setTokenValid] = React.useState(false);\r\n  const [openAlert, setOpenAlert] = React.useState(false);\r\n  const [alertMessage, setAlertMessage] = React.useState('');\r\n  const [alertSeverity, setAlertSevirity] = React.useState('info');\r\n\r\n  React.useEffect(() => {\r\n    axios.get('/decodeToken')\r\n    .then(res => {\r\n        const authenticated = res.data;\r\n        if(authenticated){\r\n            setTimeout(() => {\r\n              setTokenValid(true);\r\n              setIsFetching(false);\r\n            },1000)\r\n\r\n        }\r\n    })\r\n    .catch(err => {\r\n        setTimeout(() => {\r\n          showAlert({severity:'error', message: err.message})\r\n          setTokenValid(false)\r\n          setIsFetching(false);\r\n        }, 1000)\r\n\r\n    })\r\n  },[]) \r\n\r\n  const showAlert = options => {\r\n    const {message, severity} = options;\r\n    setAlertMessage(message);\r\n    setAlertSevirity(severity);\r\n    setOpenAlert(true);\r\n  }\r\n\r\n  const hideAlert = () => {\r\n    setOpenAlert(false)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {isFetching ? \r\n        <Loading open={isFetching} message={\"Check Authenticated..\"}></Loading> :\r\n        <Switch>\r\n          <Route exact path=\"/pages/login\">\r\n            <Login showAlert={showAlert} setTokenValid={setTokenValid}></Login>\r\n          </Route>\r\n          <AuthRoute \r\n            tokenValid={tokenValid} \r\n            setTokenValid={setTokenValid} \r\n            showAlert={showAlert} \r\n            exact path=\"/pages/protected\"\r\n          >\r\n            <Protected></Protected>\r\n          </AuthRoute>\r\n          <AuthRoute \r\n            tokenValid={tokenValid} \r\n            setTokenValid={setTokenValid} \r\n            showAlert={showAlert} \r\n            exact path=\"/pages/userInfo\"\r\n          >\r\n            <UserInfo></UserInfo>\r\n          </AuthRoute>\r\n          <Route exact path=\"/\" component={Home}/>\r\n        </Switch>\r\n      }\r\n      <Alert\r\n        openAlert={openAlert}\r\n        setOpenAlert={setOpenAlert}\r\n        alertMessage={alertMessage}\r\n        severity={alertSeverity}\r\n      ></Alert>\r\n    </div>\r\n\r\n  )\r\n}\r\n","import React from 'react';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport App from './App';\r\n\r\nfunction Root() {\r\n    return (\r\n        <BrowserRouter>\r\n            <App />\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default React.memo(Root)\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Root from './Root';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Root />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}