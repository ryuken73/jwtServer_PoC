{"version":3,"sources":["pages/Home.js","Loading.js","pages/Login.js","pages/Menu.js","pages/Unauth.js","pages/Download.js","pages/BenchMark.js","pages/BenchMarkAuthReq.js","pages/Protected.js","Alert.js","App.js","Root.js","reportWebVitals.js","index.js"],"names":["React","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","SimpleBackdrop","props","classes","open","setOpen","message","Backdrop","className","onClick","Box","Copyright","Typography","variant","align","Link","href","Date","getFullYear","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","injectTokenQueryParamenter","token","console","log","axios","defaults","params","accessToken","Login","setTokenValid","showAlert","useAccessTokenIn","setAccessToken","setAccessTokenDecoded","setRefreshTokenDecoded","location","useLocation","DEFAULT_FIRST_PAGE","state","toPage","goto","gotoNoLogin","history","useHistory","useState","userId","setUserId","password","setPassword","accessTokenExpire","setAccessTokenExpire","refreshTokenExpire","setRefreshTokenExpire","isFetching","setIsFetching","returnAccessTokenBy","injectAccessToken","onSubmit","useCallback","event","setTimeout","post","username","expAccess","expRefresh","then","res","data","authenticated","errMsg","getAccessTokenFromBody","refreshTokenDecoded","getRefreshTokenDecoded","jwt","decode","setupRequest","push","severity","catch","err","error","Container","component","maxWidth","CssBaseline","Avatar","div","noValidate","TextField","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","type","onKeyDown","keyCode","FormControlLabel","control","Checkbox","Button","Grid","container","item","xs","Paper","p","fontSize","mt","size","isNaN","parseInt","memo","Menu","onClickLogout","m","to","ml","Unauth","resource","useParams","window","localStorage","setItem","now","minWidth","height","Divider","download","Benchmark","mkCounter","reqCount","setReqCount","reqStatus","setReqStatus","publicResult","setPublicResult","privateResult","setPrivateResult","publicProcessed","setPublicProcessed","privateProcessed","setPrivateProcessed","onChangeReqCount","max","current","requestPublic","reqId","get","requestPrivate","runReqPublic","a","reqNumbers","startTime","processed","elapsed","runReqPrivate","ButtonCustom","disabled","children","Intl","NumberFormat","format","Protected","accessTokenDecoded","accessRemainSeconds","setAccessRemainSeconds","refreshRemainSeconds","setRefreshRemainSeconds","useEffect","expAccessTimer","expRefreshTimer","origAccessToken","substr","length","accessTokenExp","exp","refreshTokenExp","setInterval","remainSec","toFixed","clearInterval","Fragment","mb","border","Object","entries","map","key","style","BenchMark","BenchMarkAuthReq","Alert","elevation","root","CustomizedSnackbars","openAlert","setOpenAlert","alertMessage","handleClose","reason","Snackbar","autoHideDuration","onClose","App","pathname","redirectPath","syncLogout","e","setAlertMessage","alertSeverity","setAlertSevirity","listenLogout","addEventListener","removeEventListener","interceptor","options","errStatusCode","loginPageUrl","interceptors","response","use","status","refreshTokenExpires","Promise","reject","accessTokenExpires","success","config","rest","originalRequestConfig","request","origResponse","axiosRedirectSetup","eject","axiosRedirectRelease","exact","path","Root","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6a78abd2.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction Home(props) {\r\n    console.log('Home re-render: ', props);\r\n\r\n    return (\r\n        <div>\r\n            Home Page\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Home)","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nexport default function SimpleBackdrop(props) {\r\n  const classes = useStyles();\r\n  const {open, setOpen, message} = props;\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  return (\r\n    <Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\r\n        <Box>{message}</Box>\r\n    </Backdrop>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport axios from 'axios';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport Loading from '../Loading';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright Â© '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nconst injectTokenQueryParamenter = token => {\r\n  console.log('injectTokenQueryParamenter:', token)\r\n  axios.defaults.params = {\r\n    ...axios.defaults.params,\r\n    accessToken: token\r\n  }\r\n}\r\n\r\nfunction Login(props) {\r\n  const {\r\n    setTokenValid,\r\n    showAlert,\r\n    useAccessTokenIn,\r\n    setAccessToken,\r\n    setAccessTokenDecoded,\r\n    setRefreshTokenDecoded,\r\n  } = props;\r\n  const location = useLocation();\r\n  const LOGIN_PAGE = '/pages/login';\r\n  const DEFAULT_FIRST_PAGE = '/pages/private/portal';\r\n  console.log('##### goto from location0: ', location.state && location.state.toPage);\r\n  const goto = location.state && location.state.toPage || DEFAULT_FIRST_PAGE;\r\n  console.log('##### goto from location1: ', goto);\r\n  const gotoNoLogin = goto === LOGIN_PAGE ? DEFAULT_FIRST_PAGE : goto;\r\n  console.log('##### goto from location2: ', gotoNoLogin);\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [userId, setUserId] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [accessTokenExpire, setAccessTokenExpire] = React.useState(10);\r\n  const [refreshTokenExpire, setRefreshTokenExpire] = React.useState(60);\r\n  const [isFetching, setIsFetching] = React.useState(false);\r\n\r\n  const onChangeId = event => setUserId(event.target.value);\r\n  const onChangePassword = event => setPassword(event.target.value);\r\n\r\n  const onKeyUp = event => {\r\n    if(event.keyCode === 13){\r\n      onSubmit();\r\n    }\r\n  }\r\n\r\n  const returnAccessTokenBy = 'body'; // cookie\r\n  const getAccessTokenFromBody = res => res.data.accessToken;\r\n  const getRefreshTokenDecoded = res => res.data.refreshTokenDecoded;\r\n  const injectAccessToken = {\r\n    'query' : injectTokenQueryParamenter,\r\n    'cookie' : () => {},\r\n    'header' : () => {}\r\n  }\r\n\r\n  const onChangeAccessTokenExp = event => {\r\n    console.log(event.target.value);\r\n    if(event.target.value === ''){\r\n      setAccessTokenExpire(0);\r\n      return\r\n    }\r\n    if(!isNaN(parseInt(event.target.value))){\r\n      setAccessTokenExpire(parseInt(event.target.value));\r\n    }\r\n  }\r\n  \r\n  const onChangeRefreshTokenExp = event => {\r\n    console.log(event.target.value);\r\n    if(event.target.value === ''){\r\n      setRefreshTokenExpire(0);\r\n      return\r\n    }\r\n    if(!isNaN(parseInt(event.target.value))){\r\n      setRefreshTokenExpire(parseInt(event.target.value));\r\n    }\r\n  }\r\n\r\n\r\n  const onSubmit = React.useCallback(event => {\r\n    console.log('submit:', userId, password);\r\n    setIsFetching(true);\r\n    setTimeout(() => {\r\n      axios.post('/login', {\r\n          username: userId,\r\n          password: password,\r\n          expAccess: accessTokenExpire,\r\n          expRefresh: refreshTokenExpire,\r\n          returnAccessTokenBy\r\n      }).\r\n      then(res => {\r\n          console.log(res.data);\r\n          const {authenticated, errMsg} = res.data;\r\n          if(authenticated === true){\r\n            if(returnAccessTokenBy === 'body'){\r\n              const accessToken = getAccessTokenFromBody(res);                \r\n              const refreshTokenDecoded = getRefreshTokenDecoded(res);\r\n              setAccessToken(accessToken);\r\n              setAccessTokenDecoded(jwt.decode(accessToken));\r\n              setRefreshTokenDecoded(refreshTokenDecoded);\r\n              const setupRequest = injectAccessToken[useAccessTokenIn];\r\n              setupRequest(accessToken);\r\n            }\r\n            setTokenValid(true)\r\n            console.log('##### in callback: ', gotoNoLogin);\r\n\r\n            // history.push('/pages/private/portal');\r\n            history.push(gotoNoLogin);\r\n\r\n            setIsFetching(false)\r\n            showAlert({severity:'success', message: 'login success!'})\r\n            return;\r\n          }\r\n          setIsFetching(false)\r\n          showAlert({severity:'error', message: errMsg})\r\n      })\r\n      .catch(err => {\r\n          console.error(err)\r\n          setIsFetching(false)\r\n      })\r\n    }, 300)\r\n  },[userId, password, accessTokenExpire, refreshTokenExpire, gotoNoLogin])\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      {isFetching && <Loading open={isFetching} message={\"Check Authenticated..\"}></Loading> }\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <div className={classes.div} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n            value={userId}\r\n            onChange={onChangeId}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            value={password}\r\n            onChange={onChangePassword}\r\n            onKeyDown={onKeyUp}\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={onSubmit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n      <Paper width=\"90%\">\r\n        <Box p=\"10px\" fontSize=\"12px\" mt=\"10px\">\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Box width=\"100%\">Access Token Expires in(sec)</Box>\r\n            <Box width=\"100%\">\r\n              <TextField variant=\"outlined\" size=\"small\" margin=\"dense\" value={accessTokenExpire} onChange={onChangeAccessTokenExp}></TextField>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Box width=\"100%\">Refresh Token Expires in(sec)</Box>\r\n            <Box width=\"100%\">\r\n              <TextField variant=\"outlined\" size=\"small\" margin=\"dense\" value={refreshTokenExpire} onChange={onChangeRefreshTokenExp}></TextField>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      </Paper>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n\r\n\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default React.memo(Login)","import React, { Component } from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nfunction Menu(props){\r\n    const {onClickLogout} = props;\r\n    return (\r\n        <Box display=\"flex\">\r\n            <Box m=\"5px\"><NavLink to=\"/pages/private/portal\">Portal</NavLink></Box>\r\n            <Box m=\"5px\"><NavLink to=\"/pages/unauth/unauth-download\">Unauth-Download</NavLink></Box>\r\n            <Box m=\"5px\"><NavLink to=\"/pages/private/private-download\">Private-Download</NavLink></Box>\r\n            <Box m=\"5px\"><NavLink to=\"/pages/private/benchmark\">Benchmark</NavLink></Box>\r\n            <Box m=\"5px\"><NavLink to=\"/pages/private/benchmarkAuthReq\">Auth-Req</NavLink></Box>\r\n            <Box ml=\"auto\"><Button onClick={onClickLogout}>logout</Button></Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Menu);","import React from 'react';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {useParams} from 'react-router-dom';\r\nimport Menu from './Menu';\r\nimport axios from 'axios';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction Unauth(props) {\r\n    const {resource} = useParams();\r\n    const history = useHistory();\r\n\r\n    const onClickLogout = React.useCallback(() => {\r\n        axios.defaults.params = {\r\n            ...axios.defaults.params,\r\n            accessToken: ''\r\n        }\r\n        window.localStorage.setItem('logout', Date.now());\r\n        history.push('/pages/login')\r\n    },[])\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"auto\" mt=\"80px\" minWidth=\"550px\" width=\"40%\">\r\n            <Box height={\"255px\"}></Box>\r\n            <Divider/>\r\n            <Box fontSize=\"30px\" mt=\"10px\">\r\n                {resource} page\r\n            </Box>\r\n            <Menu onClickLogout={onClickLogout}></Menu>\r\n            {/* {resource === 'unauth-download' && <Button variant=\"outlined\" onClick={downloadUnauth}>{resource}</Button>} */}\r\n            {resource === 'unauth-download' && <a href=\"/public/download/sample.txt\" download>download file</a>}\r\n        </Box>           \r\n    )\r\n}\r\n\r\nexport default React.memo(Unauth)","import React from 'react';\r\n\r\nfunction Download(props) {\r\n    const {unauth} = props;\r\n    return (\r\n        <div>\r\n            Download Page\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default React.memo(Download)","import React from 'react'\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport axios from 'axios';\r\n\r\nfunction Benchmark() {\r\n\r\n    const [reqCount, setReqCount] = React.useState(100);\r\n    const [reqStatus, setReqStatus] = React.useState('stopped');\r\n    const [publicResult, setPublicResult] = React.useState(0);\r\n    const [privateResult, setPrivateResult] = React.useState(0);\r\n    const [publicProcessed, setPublicProcessed] = React.useState(0);\r\n    const [privateProcessed, setPrivateProcessed] = React.useState(0);\r\n\r\n    const onChangeReqCount = React.useCallback(event => {\r\n        setReqCount(event.target.value);\r\n    }, [])\r\n\r\n    function* mkCounter(max){\r\n        let current = 0;\r\n        while(current < max){\r\n            yield current;\r\n            current += 1;\r\n        }\r\n    }\r\n\r\n    const requestPublic = reqId => {\r\n        return axios.get(`/public/echo/${reqId}`)\r\n    }\r\n\r\n    const requestPrivate = reqId => {\r\n        return axios.get(`/private/echo/${reqId}`)\r\n    }\r\n\r\n    const runReqPublic = React.useCallback(async () => {\r\n        setReqStatus('started');\r\n        const reqNumbers = mkCounter(reqCount);\r\n        const startTime = Date.now();\r\n        setPublicResult(0)\r\n        setPublicProcessed(0)\r\n        for await (let reqId of reqNumbers){\r\n            await requestPublic(reqId); \r\n            setPublicProcessed(processed => processed + 1)\r\n        }\r\n\r\n        const elapsed = Date.now() - startTime;\r\n        setPublicResult(elapsed);\r\n        setReqStatus('stopped');\r\n    },[reqCount])\r\n\r\n    \r\n    const runReqPrivate = React.useCallback(async () => {\r\n        setReqStatus('started');\r\n        const reqNumbers = mkCounter(reqCount);\r\n        const startTime = Date.now();\r\n        setPrivateResult(0)\r\n        setPrivateProcessed(0)\r\n        for await (let reqId of reqNumbers){\r\n            await requestPrivate(reqId); \r\n            setPrivateProcessed(processed => processed + 1)\r\n        }\r\n\r\n        const elapsed = Date.now() - startTime;\r\n        setPrivateResult(elapsed);\r\n        setReqStatus('stopped');\r\n    },[reqCount])\r\n\r\n    const ButtonCustom = (props) => {\r\n        return (\r\n        <Button \r\n            disabled={reqStatus === 'started'} \r\n            variant=\"contained\" \r\n            size=\"small\" \r\n            color=\"primary\" \r\n            {...props}\r\n        >\r\n            {props.children}\r\n        </Button>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"5px\">\r\n            <Box>\r\n                <TextField \r\n                    variant=\"outlined\" \r\n                    label=\"request count\" \r\n                    margin=\"dense\" \r\n                    size=\"small\"\r\n                    value={reqCount}\r\n                    onChange={onChangeReqCount}\r\n                ></TextField>\r\n            </Box>\r\n            <Box display=\"flex\" alignItems=\"center\" m=\"5px\"> \r\n                <Box width=\"100px\">Echo(Public)</Box>\r\n                <ButtonCustom onClick={runReqPublic}>Start</ButtonCustom>\r\n                <Box width=\"auto\" ml=\"10px\">Result: {new Intl.NumberFormat().format(publicResult)} msec   [{publicProcessed}]</Box>\r\n\r\n            </Box>\r\n            <Box display=\"flex\" alignItems=\"center\" m=\"5px\">\r\n                <Box width=\"100px\">Echo(Private)</Box>\r\n                <ButtonCustom onClick={runReqPrivate}>Start</ButtonCustom>\r\n                <Box width=\"auto\" ml=\"10px\">Result: {new Intl.NumberFormat().format(privateResult)} msec   [{privateProcessed}]</Box>\r\n\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Benchmark)\r\n","import React from 'react'\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport axios from 'axios';\r\n\r\nfunction Benchmark() {\r\n\r\n    const [reqCount, setReqCount] = React.useState(100);\r\n    const [reqStatus, setReqStatus] = React.useState('stopped');\r\n    const [publicResult, setPublicResult] = React.useState(0);\r\n    const [privateResult, setPrivateResult] = React.useState(0);\r\n    const [publicProcessed, setPublicProcessed] = React.useState(0);\r\n    const [privateProcessed, setPrivateProcessed] = React.useState(0);\r\n\r\n    const onChangeReqCount = React.useCallback(event => {\r\n        setReqCount(event.target.value);\r\n    }, [])\r\n\r\n    function* mkCounter(max){\r\n        let current = 0;\r\n        while(current < max){\r\n            yield current;\r\n            current += 1;\r\n        }\r\n    }\r\n\r\n    const requestPublic = reqId => {\r\n        return axios.get(`/public/echo/${reqId}`)\r\n    }\r\n\r\n    const requestPrivate = reqId => {\r\n        return axios.get(`/private-auth-req/echo/${reqId}`)\r\n    }\r\n\r\n    const runReqPublic = React.useCallback(async () => {\r\n        setReqStatus('started');\r\n        const reqNumbers = mkCounter(reqCount);\r\n        const startTime = Date.now();\r\n        setPublicResult(0)\r\n        setPublicProcessed(0)\r\n        for await (let reqId of reqNumbers){\r\n            await requestPublic(reqId); \r\n            setPublicProcessed(processed => processed + 1)\r\n        }\r\n\r\n        const elapsed = Date.now() - startTime;\r\n        setPublicResult(elapsed);\r\n        setReqStatus('stopped');\r\n    },[reqCount])\r\n\r\n    \r\n    const runReqPrivate = React.useCallback(async () => {\r\n        setReqStatus('started');\r\n        const reqNumbers = mkCounter(reqCount);\r\n        const startTime = Date.now();\r\n        setPrivateResult(0)\r\n        setPrivateProcessed(0)\r\n        for await (let reqId of reqNumbers){\r\n            await requestPrivate(reqId); \r\n            setPrivateProcessed(processed => processed + 1)\r\n        }\r\n\r\n        const elapsed = Date.now() - startTime;\r\n        setPrivateResult(elapsed);\r\n        setReqStatus('stopped');\r\n    },[reqCount])\r\n\r\n    const ButtonCustom = (props) => {\r\n        return (\r\n        <Button \r\n            disabled={reqStatus === 'started'} \r\n            variant=\"contained\" \r\n            size=\"small\" \r\n            color=\"primary\" \r\n            {...props}\r\n        >\r\n            {props.children}\r\n        </Button>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"5px\">\r\n            <Box>\r\n                <TextField \r\n                    variant=\"outlined\" \r\n                    label=\"request count\" \r\n                    margin=\"dense\" \r\n                    size=\"small\"\r\n                    value={reqCount}\r\n                    onChange={onChangeReqCount}\r\n                ></TextField>\r\n            </Box>\r\n            <Box display=\"flex\" alignItems=\"center\" m=\"5px\"> \r\n                <Box width=\"100px\">Echo(Public)</Box>\r\n                <ButtonCustom onClick={runReqPublic}>Start</ButtonCustom>\r\n                <Box width=\"auto\" ml=\"10px\">Result: {new Intl.NumberFormat().format(publicResult)} msec   [{publicProcessed}]</Box>\r\n\r\n            </Box>\r\n            <Box display=\"flex\" alignItems=\"center\" m=\"5px\">\r\n                <Box width=\"100px\">Echo(Private)</Box>\r\n                <ButtonCustom onClick={runReqPrivate}>Start</ButtonCustom>\r\n                <Box width=\"auto\" ml=\"10px\">Result: {new Intl.NumberFormat().format(privateResult)} msec   [{privateProcessed}]</Box>\r\n\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Benchmark)\r\n","import React from 'react';\r\nimport {useParams} from 'react-router-dom';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from './Menu';\r\nimport Download from './Download';\r\nimport BenchMark from './BenchMark';\r\nimport BenchMarkAuthReq from './BenchMarkAuthReq';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { useHistory } from 'react-router';\r\nimport axios from 'axios';\r\n\r\nfunction Protected(props) {\r\n    console.log('Protected re-render: ', props);\r\n    const {accessToken, accessTokenDecoded} = props;\r\n    const {setAccessToken, setAccessTokenDecoded, setRefreshTokenDecoded} = props;\r\n    const {refreshTokenDecoded} = props;\r\n    const history = useHistory();\r\n    const {resource} = useParams();\r\n    const [isFetching, setIsFetching] = React.useState(true);\r\n    const [accessRemainSeconds, setAccessRemainSeconds] = React.useState('calculating.');\r\n    const [refreshRemainSeconds, setRefreshRemainSeconds] = React.useState('calculating.');\r\n\r\n    React.useEffect(() => {\r\n        console.log('### set timer for token expiry')\r\n        if(accessTokenDecoded === '' || refreshTokenDecoded === ''){\r\n            return\r\n        }\r\n        let expAccessTimer, expRefreshTimer;\r\n\r\n        const origAccessToken = refreshTokenDecoded.accessToken;\r\n        refreshTokenDecoded.accessToken = \r\n        origAccessToken.substr(1,10) + \r\n        '...' +  \r\n        origAccessToken.substr(origAccessToken.length -5)\r\n        const accessTokenExp = accessTokenDecoded.exp;\r\n        const refreshTokenExp = refreshTokenDecoded.exp;\r\n        expAccessTimer = setInterval(() => {\r\n            const remainSec = parseInt((accessTokenExp*1000 - Date.now())/1000).toFixed(0);\r\n            console.log('####', remainSec, accessTokenExp*1000, Date.now())\r\n            if(remainSec <= 0) {\r\n                setAccessRemainSeconds('expired');\r\n                clearInterval(expAccessTimer);\r\n                return\r\n            }\r\n            setAccessRemainSeconds(remainSec);\r\n        },1000)\r\n        expRefreshTimer = setInterval(() => {\r\n            const remainSec = parseInt((refreshTokenExp*1000 - Date.now())/1000).toFixed(0);\r\n            if(remainSec <= 0) {\r\n                setRefreshRemainSeconds('expired');\r\n                clearInterval(expRefreshTimer);\r\n                return\r\n            }\r\n            setRefreshRemainSeconds(remainSec);\r\n        },1000)\r\n        return () => {\r\n            console.log('dismount Protected')\r\n            clearInterval(expAccessTimer);\r\n            clearInterval(expRefreshTimer);\r\n        }\r\n    },[accessTokenDecoded, refreshTokenDecoded]);\r\n\r\n    React.useEffect(() => {        \r\n        axios.get('/private')\r\n        .then(res => {\r\n            console.log(res);\r\n            if(refreshTokenDecoded === ''){\r\n                // refresh(F5) occurred. need to set accessToken and refreshToken;\r\n                const {refreshTokenDecoded, accessTokenDecoded} = res.data;\r\n                const origAccessToken = refreshTokenDecoded.accessToken;\r\n                setAccessToken(origAccessToken)\r\n                refreshTokenDecoded.accessToken = \r\n                origAccessToken.substr(1,10) + \r\n                '...' +  \r\n                origAccessToken.substr(origAccessToken.length -5)               \r\n                setAccessTokenDecoded(accessTokenDecoded);\r\n                setRefreshTokenDecoded(refreshTokenDecoded);\r\n            }\r\n            setIsFetching(false);\r\n        })\r\n        .catch(err => {\r\n            setIsFetching(false);\r\n            console.log(err)\r\n        })\r\n\r\n    },[resource])\r\n\r\n    const onClickLogout = React.useCallback(() => {\r\n        axios.defaults.params = {\r\n            ...axios.defaults.params,\r\n            accessToken: ''\r\n        }\r\n        window.localStorage.setItem('logout', Date.now());\r\n        history.push('/pages/login')\r\n    },[])\r\n    return (\r\n        <Box display=\"flex\" flexDirection=\"column\" m=\"auto\" mt=\"80px\" minWidth=\"550px\" width=\"40%\">\r\n            {isFetching === false &&      \r\n            <React.Fragment>\r\n                <Box display=\"flex\" mb=\"10px\">\r\n                    <Box display=\"flex\" flexDirection=\"column\" width=\"50%\" m=\"5px\">\r\n                        <Box color={accessRemainSeconds==='expired' && 'red'} mb=\"5px\">Access Token: remains [{accessRemainSeconds}]</Box>\r\n                        <Box border={1}>\r\n                            {Object.entries(accessTokenDecoded).map(([key, value]) => {\r\n                                return (\r\n                                    <Box p=\"3px\" display=\"flex\">\r\n                                            <Box>{key} :</Box>\r\n                                            <Box>{value}</Box>\r\n                                    </Box>\r\n                                )\r\n                            })}\r\n                        </Box>\r\n                    </Box>\r\n                    <Box display=\"flex\" flexDirection=\"column\" width=\"50%\" m=\"5px\">\r\n                        <Box color={refreshRemainSeconds==='expired' && 'red'} mb=\"5px\">Refresh Token: remains [{refreshRemainSeconds}]</Box>\r\n                        <Box border={1}>\r\n                            {Object.entries(refreshTokenDecoded).map(([key, value]) => {\r\n                                return (\r\n                                    <Box p=\"3px\" display=\"flex\">\r\n                                            <Box>{key} :</Box>\r\n                                            <Box>{value}</Box>\r\n                                    </Box>\r\n                                )\r\n                            })}\r\n                        </Box>\r\n                    </Box>\r\n                </Box>\r\n\r\n\r\n                <Divider/>\r\n                <Box fontSize=\"30px\" mt=\"10px\">\r\n                    {resource} page\r\n                </Box>\r\n                <Menu onClickLogout={onClickLogout}></Menu>\r\n                {resource === 'portal' && (\r\n                    <Box style={{\"word-wrap\":\"break-word\"}}>access token: {axios.defaults.params.accessToken}</Box>\r\n                )}\r\n                {resource === 'private-download' && (\r\n                    <React.Fragment>\r\n                        <a href={`/private/download/sample.txt?accessToken=${accessToken}`} >download file(401)</a>\r\n                        <a href={`/private/static/download/sample.txt?accessToken=${accessToken}`} >download file(302)</a>\r\n                    </React.Fragment>\r\n                )}\r\n                {resource === 'benchmark' && <BenchMark></BenchMark>}\r\n                {resource === 'benchmarkAuthReq' && <BenchMarkAuthReq></BenchMarkAuthReq>}\r\n\r\n\r\n            </React.Fragment>\r\n            }\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default React.memo(Protected)","import React from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '100%',\r\n    '& > * + *': {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function CustomizedSnackbars(props) {\r\n  const classes = useStyles();\r\n  const {openAlert, setOpenAlert, severity='info', alertMessage=''} = props;\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    setOpenAlert(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Snackbar open={openAlert} autoHideDuration={3000} onClose={handleClose}>\r\n        <Alert severity={severity} onClose={handleClose}>{alertMessage}</Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport {Route, Switch, useHistory, useLocation} from 'react-router-dom';\r\nimport Box from '@material-ui/core/Box'\r\nimport AuthRoute from './AuthRoute';\r\nimport {Login, Protected, Unauth} from './pages';\r\nimport Loading from './Loading';\r\nimport Alert from './Alert';\r\nimport axios from 'axios';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nexport default function App(props) {\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const {pathname, state} = location;\r\n  console.log('App re-render:', props, pathname, props.location);\r\n\r\n  const [accessToken, setAccessToken] = React.useState('');\r\n  const [accessTokenDecoded, setAccessTokenDecoded] = React.useState('');\r\n  const [refreshTokenDecoded, setRefreshTokenDecoded] = React.useState('');\r\n  const [redirectPath, setRedirectPath] = React.useState(pathname)\r\n\r\n  const syncLogout = e => {\r\n    if (e.key === 'logout') {\r\n      console.log('logged out from storage!')\r\n      history.push('/pages/login');\r\n    }\r\n  }\r\n\r\n  const axiosRedirectSetup = options => {\r\n    const {axios,  errStatusCode, loginPageUrl, toPage} = options;\r\n    axios.interceptors.response.use(\r\n      // 200 resposne. just pass response\r\n      function(response){\r\n        console.log('### in intercepter:', response)\r\n        return response;\r\n      },\r\n      async function(error){\r\n      // not 200 response.\r\n        console.log(error.response)\r\n        // if response code is refresh token expired, then redirect login page.\r\n        if(error.response.status === errStatusCode.refreshTokenExpires){\r\n          console.log('### add toPage: ', toPage)\r\n          history.push(loginPageUrl, {toPage});\r\n          return Promise.reject(error);\r\n        }\r\n        // if response code is access token expired, then request refresh token and resend request.\r\n        if(error.response.status === errStatusCode.accessTokenExpires){\r\n          const response = await axios.post('/refreshToken', {returnAccessTokenBy: 'body'});\r\n          console.log('###### after aixos post: ',response)\r\n          const {success, accessToken} = response.data;\r\n          console.log(success, accessToken)\r\n          if(success){\r\n            // set new access token (to refresh Protected component)\r\n            setAccessToken(accessToken);\r\n            console.log('### setAccessToken Decoded:', jwt.decode(accessToken));\r\n            setAccessTokenDecoded(jwt.decode(accessToken));\r\n            // replace default access token query parameter with new access token.\r\n            axios.defaults.params = {\r\n              ...axios.defaults.params,\r\n              accessToken\r\n            }\r\n            // setup new request config. using error.config, we can resend original request.\r\n            const {params, ...rest} = error.config;\r\n            // manually set new access token for resend request\r\n            const originalRequestConfig = {\r\n              params: {...params, accessToken},\r\n              ...rest\r\n            }   \r\n            // resend original request\r\n            const origResponse = await axios.request(originalRequestConfig);\r\n            // following response comes in original axios.method return\r\n            return origResponse;       \r\n          }\r\n        }\r\n        // if response is anything else, reject (comes in original axios's catch block)\r\n        return Promise.reject(error);\r\n      }\r\n    )\r\n  }\r\n\r\n  const axiosRedirectRelease = interceptor => {\r\n    axios.interceptors.response.eject(interceptor);\r\n  }\r\n\r\n  const [isFetching, setIsFetching] = React.useState(true);\r\n  const [tokenValid, setTokenValid] = React.useState(false);\r\n  const [openAlert, setOpenAlert] = React.useState(false);\r\n  const [alertMessage, setAlertMessage] = React.useState('');\r\n  const [alertSeverity, setAlertSevirity] = React.useState('info');\r\n  const [useAccessTokenIn, setUseAccessTokenIn] = React.useState('query')\r\n\r\n  React.useEffect(() => {\r\n    axios.defaults.params = {\r\n      ...axios.defaults.params,\r\n      useAccessTokenIn\r\n    }\r\n  },[useAccessTokenIn])\r\n\r\n  React.useEffect(() => {\r\n    const listenLogout = window.addEventListener('storage', syncLogout);\r\n    return () => {\r\n      window.removeEventListener('storage', listenLogout)\r\n    }\r\n  },[])\r\n\r\n  React.useEffect(() => {\r\n    const errStatusCode = {\r\n      'refreshTokenExpires': 401,\r\n      'accessTokenExpires': 499\r\n    }\r\n    const interceptor = axiosRedirectSetup({axios, errStatusCode, loginPageUrl:`/pages/login`, toPage:pathname})\r\n    axios.get('/decodeToken')\r\n    .then(res => {\r\n        const {authenticated} = res.data;\r\n        console.log('####### ask decode token:', res.data)\r\n        if(authenticated === true){\r\n            setTimeout(() => {\r\n              setTokenValid(true);\r\n              setIsFetching(false);\r\n              history.push(redirectPath)\r\n            },300)\r\n        } else {\r\n          setTimeout(() => {\r\n            setTokenValid(false);\r\n            setIsFetching(false);\r\n          },300)\r\n        }\r\n    })\r\n    .catch(err => {\r\n        setTimeout(() => {\r\n          showAlert({severity:'error', message: err.message})\r\n          setTokenValid(false)\r\n          setIsFetching(false);\r\n        }, 300)\r\n\r\n    })\r\n\r\n    return () => {\r\n      console.log('$$$ release interceptor')\r\n      axiosRedirectRelease(interceptor)\r\n    }\r\n  },[]) \r\n\r\n  const showAlert = React.useCallback(options => {\r\n    const {message, severity} = options;\r\n    setAlertMessage(message);\r\n    setAlertSevirity(severity);\r\n    setOpenAlert(true);\r\n  },[])\r\n\r\n  return (\r\n    <div>\r\n      {isFetching ? \r\n        <Loading open={isFetching} message={\"Check Authenticated..\"}></Loading> :\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Login \r\n              showAlert={showAlert} \r\n              setTokenValid={setTokenValid} \r\n              useAccessTokenIn={useAccessTokenIn}\r\n              setAccessToken={setAccessToken}\r\n              setAccessTokenDecoded={setAccessTokenDecoded}\r\n              setRefreshTokenDecoded={setRefreshTokenDecoded}\r\n            ></Login> \r\n          </Route> \r\n          <Route exact path=\"/pages/login\">\r\n            <Login \r\n              showAlert={showAlert} \r\n              setTokenValid={setTokenValid} \r\n              useAccessTokenIn={useAccessTokenIn} \r\n              setAccessToken={setAccessToken}\r\n              setAccessTokenDecoded={setAccessTokenDecoded}\r\n              setRefreshTokenDecoded={setRefreshTokenDecoded}\r\n            ></Login>\r\n          </Route>\r\n          <Route \r\n            setTokenValid={setTokenValid} \r\n            showAlert={showAlert} \r\n            path=\"/pages/private/:resource\"\r\n          >\r\n            <Protected \r\n              accessToken={accessToken} \r\n              setAccessToken={setAccessToken}\r\n              setAccessTokenDecoded={setAccessTokenDecoded}\r\n              setRefreshTokenDecoded={setRefreshTokenDecoded}\r\n              accessTokenDecoded={accessTokenDecoded} \r\n              refreshTokenDecoded={refreshTokenDecoded}\r\n            ></Protected>\r\n          </Route>\r\n          <Route \r\n            showAlert={showAlert} \r\n            path=\"/pages/unauth/:resource\"\r\n          >\r\n            <Unauth></Unauth>\r\n          </Route>\r\n          {/* <AuthRoute \r\n            tokenValid={tokenValid} \r\n            setTokenValid={setTokenValid} \r\n            showAlert={showAlert} \r\n            path=\"/pages/private/:resource\"\r\n          >\r\n            <Protected></Protected>\r\n          </AuthRoute> */}\r\n        </Switch>\r\n      }\r\n      <Alert\r\n        openAlert={openAlert}\r\n        setOpenAlert={setOpenAlert}\r\n        alertMessage={alertMessage}\r\n        severity={alertSeverity}\r\n      ></Alert>\r\n    </div>\r\n\r\n  )\r\n}\r\n","import React from 'react';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport App from './App';\r\n\r\nfunction Root() {\r\n    return (\r\n        <BrowserRouter>\r\n            <App />\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default React.memo(Root)\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Root />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}